# 🎯 並行作業オーケストレーション

## 作業分担図

```
                    ┌──────────────────────────────────┐
                    │      rope-optimus-simulator      │
                    └──────────────────────────────────┘
                                    │
              ┌─────────────────────┼─────────────────────┐
              ▼                     │                     ▼
┌─────────────────────────┐         │         ┌─────────────────────────┐
│     Claude Code         │         │         │        Codex            │
│  (UI/React/SVG専門)     │         │         │  (ロジック/最適化専門)  │
├─────────────────────────┤         │         ├─────────────────────────┤
│ • SVGグラデーション修正 │         │         │ • quantMode UI連携     │
│ • 変数スコープ解消      │         │         │ • pack/unpack検証      │
│ • コンポーネント分割    │         │         │ • 計算精度の明示       │
│ • Playwrightテスト維持  │         │         │ • seqLen安全ガード     │
└─────────────────────────┘         │         └─────────────────────────┘
              │                     │                     │
              └─────────────────────┼─────────────────────┘
                                    ▼
                    ┌──────────────────────────────────┐
                    │         最終マージ               │
                    │   (App.jsx への統合・調整)       │
                    └──────────────────────────────────┘
```

## 🚀 同時並行でOKなタスク

| Claude Code | Codex | 競合リスク |
|-------------|-------|-----------|
| A-1: SVGグラデーションID修正 | B-1: quantMode UI連携 | 低（別セクション） |
| A-2: 変数スコープ修正 | B-2: pack/unpack検証 | なし |
| A-3: コンポーネント分割 | B-3: 計算精度明示 | 中（UI部分で競合可能性） |

## ⚠️ 注意: 競合が起きやすいポイント

1. **State定義の追加** (`useState`の行)
   - Claude CodeとCodexが同時に追加すると重複する
   - 対策: マージ時に重複を手動解消

2. **JSX内のUI追加** (Parametersセクション)
   - 両方がUI要素を追加する場合
   - 対策: 明確な挿入位置をコメントで指定

3. **import文**
   - 同じモジュールを別々に追加
   - 対策: マージ時にimportを整理

## 📝 推奨ワークフロー

### Phase 1: 並行作業（同時実行可能）
```bash
# Terminal 1 - Claude Code
cd rope-optimus-simulator
# TASK-A を実行

# Terminal 2 - Codex
cd rope-optimus-simulator
# TASK-B を実行
```

### Phase 2: マージ
```bash
# 両方の変更をgitで確認
git diff src/App.jsx

# 競合があれば手動解消
# 特にState定義とUI部分をチェック
```

### Phase 3: 動作確認
```bash
npm run dev
npm run test  # Playwrightテスト
```

## 🔍 動作確認チェックリスト（最終）

- [ ] `npm run dev` でエラーなし
- [ ] SVGモードでOptimus手が表示
- [ ] Photoモード/Pixiモードも動作
- [ ] quantMode切り替えでRMSEが変化
- [ ] pack/unpack一致率=100%表示
- [ ] seqLen上限でガード発動
- [ ] `npm run test` 全パス
